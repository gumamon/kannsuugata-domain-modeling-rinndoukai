# 6.4 ビジネスルールを型システムで表現する
※(まだ)完全性についてのはなし

課題：ビジネスルールを型システムだけで文書化したい

* 型システムを使って・・・
	* 有効、無効の状態を判断し、無効の場合はエラーとしたい

例題：メールアドレスの保管
* ビジネスルール
	* 検証メールは未検証のメールアドレスのみに送信する
	* パスワードメールは検証済のメールアドレスにのみ送信

解決例
良くない例：
* CustomerEmail構造体に IsVerified (bool)フィールドを設定する
	* 構造体を見ても、いつなんのために使うのかがわからない
	* LsVerified フィールドの更新を忘れるとバグになる

良い例：
* 検証済メール、未検証のメールをそれぞれモデル化する
* 検証済メール、未検証のメールの型も別々のものにする

> [!IMPORTANT]
> 関数の外から変更を加えない変数についてはプライベートコンストラクタとすること。
> * ex. verifiedEmailAddress
> 「不正な状態は表現できないようにする」という設計ガイドラインの一例。

### WIP. メール認証システムの関数を実装する

## 6.4.1: 不正な状態を私たちのドメインで表現できないようにすること
* 郵便番号の検証システム (メールアドレスの検証システムと同じアプローチが使えることを示している)
